{"version":3,"sources":["../../src/utils/clustering.js"],"names":["createClusters","mapProps","markers","radius","extent","nodeSize","minZoom","maxZoom","bounds","zoom","index","supercluster","load","map","marker","geometry","coordinates","lng","lat","getClusters","sw","ne","cluster","type","id","point_count","properties","cluster_id","getZoom","getClusterExpansionZoom"],"mappings":";;;;;;;;;;;AAAA;;;;;;AAEA,IAAMA,iBAAiB,SAAjBA,cAAiB,CACtBC,QADsB,EAEtBC,OAFsB,EAGtBC,MAHsB,EAItBC,MAJsB,EAKtBC,QALsB,EAMtBC,OANsB,EAOtBC,OAPsB,EAQlB;AAAA,KACIC,MADJ,GACqBP,QADrB,CACIO,MADJ;AAAA,KACYC,IADZ,GACqBR,QADrB,CACYQ,IADZ;;AAEJ,KAAMC,QAAQ,IAAIC,sBAAJ,CAAiB;AAC9BR,UAAQA,UAAU,EADY;AAE9BC,UAAQA,UAAU,GAFY;AAG9BC,YAAUA,YAAY,EAHQ;AAI9BC,WAASA,WAAW,CAJU;AAK9BC,WAASA,WAAW;AALU,EAAjB,CAAd;AAOA,QAAOG,MACLE,IADK,CAELV,QAAQW,GAAR,CAAY,kBAAU;AACrB,oCACIC,MADJ;AAECC,aAAU,EAAEC,aAAa,CAACF,OAAOG,GAAR,EAAaH,OAAOI,GAApB,CAAf;AAFX;AAIA,EALD,CAFK,EASLC,WATK,CAUL,CAACX,OAAOY,EAAP,CAAUH,GAAX,EAAgBT,OAAOY,EAAP,CAAUF,GAA1B,EAA+BV,OAAOa,EAAP,CAAUJ,GAAzC,EAA8CT,OAAOa,EAAP,CAAUH,GAAxD,CAVK,EAWLT,IAXK,EAaLI,GAbK,CAaD;AAAA,SACJS,QAAQC,IAAR,KAAiB,SAAjB,GACG;AACAC,OAAIF,QAAQE,EADZ;AAEAN,QAAKI,QAAQP,QAAR,CAAiBC,WAAjB,CAA6B,CAA7B,CAFL;AAGAC,QAAKK,QAAQP,QAAR,CAAiBC,WAAjB,CAA6B,CAA7B,CAHL;AAIAS,gBAAaH,QAAQI,UAAR,CAAmBD,WAJhC;AAKAE,eAAYL,QAAQI,UAAR,CAAmBC,UAL/B;AAMA;AACAC,YAAS;AAAA,WACRlB,MAAMmB,uBAAN,CAA8BP,QAAQI,UAAR,CAAmBC,UAAjD,CADQ;AAAA;AAPT,GADH,GAWGL,OAZC;AAAA,EAbC,CAAP;AA2BA,CA5CD;;QA8CStB,c,GAAAA,c","file":"clustering.js","sourcesContent":["import supercluster from './supercluster'\n\nconst createClusters = (\n\tmapProps,\n\tmarkers,\n\tradius,\n\textent,\n\tnodeSize,\n\tminZoom,\n\tmaxZoom\n) => {\n\tconst { bounds, zoom } = mapProps\n\tconst index = new supercluster({\n\t\tradius: radius || 40,\n\t\textent: extent || 512,\n\t\tnodeSize: nodeSize || 64,\n\t\tminZoom: minZoom || 0,\n\t\tmaxZoom: maxZoom || 16\n\t})\n\treturn index\n\t\t.load(\n\t\t\tmarkers.map(marker => {\n\t\t\t\treturn {\n\t\t\t\t\t...marker,\n\t\t\t\t\tgeometry: { coordinates: [marker.lng, marker.lat] }\n\t\t\t\t}\n\t\t\t})\n\t\t)\n\t\t.getClusters(\n\t\t\t[bounds.sw.lng, bounds.sw.lat, bounds.ne.lng, bounds.ne.lat],\n\t\t\tzoom\n\t\t)\n\t\t.map(cluster =>\n\t\t\tcluster.type === 'Feature'\n\t\t\t\t? {\n\t\t\t\t\t\tid: cluster.id,\n\t\t\t\t\t\tlat: cluster.geometry.coordinates[1],\n\t\t\t\t\t\tlng: cluster.geometry.coordinates[0],\n\t\t\t\t\t\tpoint_count: cluster.properties.point_count,\n\t\t\t\t\t\tcluster_id: cluster.properties.cluster_id,\n\t\t\t\t\t\t// onclick to get correct zoom\n\t\t\t\t\t\tgetZoom: () =>\n\t\t\t\t\t\t\tindex.getClusterExpansionZoom(cluster.properties.cluster_id)\n\t\t\t\t  }\n\t\t\t\t: cluster\n\t\t)\n}\n\nexport { createClusters }\n"]}