{"version":3,"sources":["../src/helpers.js"],"names":["input","originalAddEventListener","addEventListener","addEventListenerWrapper","type","listener","originalListener","event","pacContainerArray","document","getElementsByClassName","suggestionsVisible","length","style","display","suggestionSelected","which","keyCode","arrowDownEvent","JSON","parse","stringify","k","v","Node","Window","apply","preventDefault"],"mappings":";;;;;;kBAAe,UAACA,KAAD,EACf;AACC,KAAMC,2BAA2BD,MAAME,gBAAvC;;AAEA,KAAMC,0BAA0B,SAA1BA,uBAA0B,CAACC,IAAD,EAAOC,QAAP,EAChC;AACC,MAAID,SAAS,SAAb,EACA;AACC,OAAME,mBAAmBD,QAAzB;AACAA,cAAW,kBAACE,KAAD,EACX;AACC,QAAMC,oBAAoBC,SAASC,sBAAT,CAAgC,eAAhC,CAA1B;AACA;AACA,QAAMC,qBAAqBH,kBAAkBI,MAAlB,GAA2B,CAA3B,GAA+BJ,kBAAkB,CAAlB,EAAqBK,KAArB,CAA2BC,OAA3B,KAAuC,MAAtE,GAA+E,KAA1G;AACA,QAAMC,qBAAqBN,SAASC,sBAAT,CAAgC,mBAAhC,EAAqDE,MAArD,GAA8D,CAAzF;;AAEA;AACA,QAAIL,MAAMS,KAAN,KAAgB,EAAhB,IAAsBT,MAAMU,OAAN,KAAkB,EAA5C,EACA;AACC;AACA,SAAIN,sBAAsB,CAACI,kBAA3B,EACA;AACC;AACA,UAAMG,iBAAiBC,KAAKC,KAAL,CAAWD,KAAKE,SAAL,CAAed,KAAf,EAAsB,UAACe,CAAD,EAAIC,CAAJ,EACxD;AACC,WAAIA,aAAaC,IAAjB,EAAuB,OAAO,MAAP;AACvB,WAAID,aAAaE,MAAjB,EAAyB,OAAO,QAAP;AACzB,cAAOF,CAAP;AACA,OALiC,EAK/B,GAL+B,CAAX,CAAvB;AAMAL,qBAAeF,KAAf,GAAuB,EAAvB;AACAE,qBAAeD,OAAf,GAAyB,EAAzB;;AAEA;AACAX,uBAAiBoB,KAAjB,CAAuB1B,KAAvB,EAA8B,CAACkB,cAAD,CAA9B;;AAEAX,YAAMoB,cAAN;AACA;;AAED;AAlBA,UAmBK,IAAIhB,sBAAsBI,kBAA1B,EACL;AACCR,aAAMoB,cAAN;AACA;AACD;AACA;;AAED;AACArB,qBAAiBoB,KAAjB,CAAuB1B,KAAvB,EAA8B,CAACO,KAAD,CAA9B;AACA,IAvCD;AAwCA;AACDN,2BAAyByB,KAAzB,CAA+B1B,KAA/B,EAAsC,CAACI,IAAD,EAAOC,QAAP,CAAtC;AACA,EA/CD;;AAiDAL,OAAME,gBAAN,GAAyBC,uBAAzB;AACA,C","file":"helpers.js","sourcesContent":["export default (input) =>\n{\n\tconst originalAddEventListener = input.addEventListener\n\n\tconst addEventListenerWrapper = (type, listener) =>\n\t{\n\t\tif (type === \"keydown\")\n\t\t{\n\t\t\tconst originalListener = listener;\n\t\t\tlistener = (event) =>\n\t\t\t{\n\t\t\t\tconst pacContainerArray = document.getElementsByClassName('pac-container');\n\t\t\t\t// const suggestionsVisible = pacContainerArray.length > 0 ? pacContainerArray[0].offsetWidth > 0 : false;\n\t\t\t\tconst suggestionsVisible = pacContainerArray.length > 0 ? pacContainerArray[0].style.display !== 'none' : false;\n\t\t\t\tconst suggestionSelected = document.getElementsByClassName('pac-item-selected').length > 0;\n\n\t\t\t\t// enter key press\n\t\t\t\tif (event.which === 13 || event.keyCode === 13)\n\t\t\t\t{\n\t\t\t\t\t// user press enter while no suggestion is selected yet : auto-select first one (using fake arrow key) then it will be choosen by enter key press. preventDefault so form is not submitted\n\t\t\t\t\tif (suggestionsVisible && !suggestionSelected)\n\t\t\t\t\t{\n\t\t\t\t\t\t// make event from original event (copy)\n\t\t\t\t\t\tconst arrowDownEvent = JSON.parse(JSON.stringify(event, (k, v) =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (v instanceof Node) return 'Node';\n\t\t\t\t\t\t\tif (v instanceof Window) return 'Window';\n\t\t\t\t\t\t\treturn v;\n\t\t\t\t\t\t}, ' '));\n\t\t\t\t\t\tarrowDownEvent.which = 40;\n\t\t\t\t\t\tarrowDownEvent.keyCode = 40;\n\n\t\t\t\t\t\t// send arrow down key press event (add simulated event) before return press)\n\t\t\t\t\t\toriginalListener.apply(input, [arrowDownEvent])\n\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\n\t\t\t\t\t// suggestion is already selected (by arrow key) and user presses enter to choose it. preventDefault so form is not submitted\n\t\t\t\t\telse if (suggestionsVisible && suggestionSelected)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t\t// else if suggestions not visible do not prevent default (ex submit)\n\t\t\t\t}\n\n\t\t\t\t// sent (original) return key press event/\n\t\t\t\toriginalListener.apply(input, [event])\n\t\t\t}\n\t\t}\n\t\toriginalAddEventListener.apply(input, [type, listener])\n\t}\n\n\tinput.addEventListener = addEventListenerWrapper;\n};\n"]}